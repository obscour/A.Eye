<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>A.Eye Login</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="css/styles.css" rel="stylesheet" />
</head>
<body class="d-flex align-items-center justify-content-center vh-100">

  <!-- Login Box -->
  <div class="login-box text-center">
    <h3 class="mb-4" id="formTitle">Login</h3>

    <!-- Error Message -->
    <div id="error-message" class="alert alert-danger" style="display: none;"></div>
    <!-- Success Message -->
    <div id="success-message" class="alert alert-success" style="display: none;"></div>

    <!-- Login Form -->
    <form id="loginForm">
      <div class="form-floating mb-3">
        <input type="text" class="form-control" id="loginIdentifier" placeholder="Email or Username" required />
        <label for="loginIdentifier">Email or Username</label>
      </div>
      <div class="form-floating mb-4">
        <input type="password" class="form-control" id="password" placeholder="Password" required />
        <label for="password">Password</label>
      </div>
      <button type="submit" class="btn btn-primary w-100">Login</button>
      <div class="mt-2">
        <a href="#" class="text-decoration-none" onclick="showForgotPassword()">Forgot Password?</a>
      </div>
      <div class="mt-3">
        Don't have an account? <a href="#" class="text-decoration-none" onclick="toggleForms()">Get Started</a>
      </div>
    </form>

    <!-- Forgot Password Form -->
    <form id="forgotPasswordForm" style="display: none;">
      <div class="mb-3">
        <h5>Reset Password</h5>
        <p class="text-muted small">Enter your email or username. We'll send you a password reset link.</p>
      </div>
      <div class="form-floating mb-4">
        <input type="text" class="form-control" id="forgotIdentifier" placeholder="Email or Username" required />
        <label for="forgotIdentifier">Email or Username</label>
      </div>
      <button type="submit" class="btn btn-primary w-100">Send Reset Link</button>
      <div class="mt-3">
        <a href="#" class="text-decoration-none" onclick="hideForgotPassword()">Back to Login</a>
      </div>
    </form>

    <!-- Registration Form -->
    <form id="registerForm" style="display: none;">
      <div class="form-floating mb-3">
        <input type="text" class="form-control" id="registerUsername" placeholder="Username" required />
        <label for="registerUsername">Username</label>
      </div>
      <div class="form-floating mb-3">
        <input type="email" class="form-control" id="registerEmail" placeholder="Email" required />
        <label for="registerEmail">Email</label>
      </div>
      <div class="form-floating mb-3">
        <input type="password" class="form-control" id="registerPassword" placeholder="Password" required />
        <label for="registerPassword">Password</label>
      </div>
      <div class="form-floating mb-3">
        <input type="password" class="form-control" id="confirmPassword" placeholder="Confirm Password" required />
        <label for="confirmPassword">Confirm Password</label>
      </div>
      <div class="mb-3">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="agreeToTerms" required />
          <label class="form-check-label" for="agreeToTerms">
            I have read and agree to the <a href="#" onclick="showTermsModal(); return false;" class="text-decoration-none">Terms & Conditions</a> and the <a href="#" onclick="showPrivacyModal(); return false;" class="text-decoration-none">Privacy Policy</a>.
          </label>
        </div>
      </div>
      <button type="submit" class="btn btn-primary w-100" id="registerBtn" disabled>Register</button>
      <div class="mt-3">
        Already have an account? <a href="#" class="text-decoration-none" onclick="toggleForms()">Login</a>
      </div>
    </form>

    <!-- Email Verification Message (shown after registration) -->
    <div id="verificationMessage" style="display: none;">
      <div class="alert alert-info">
        <h5 class="mb-3">Registration Successful!</h5>
        <p>We've sent a confirmation link to your email, please verify before proceeding.</p>
        <p class="text-muted small mb-0">Check your inbox and click the verification link to activate your account.</p>
      </div>
      <div class="mt-3">
        <p class="text-muted small mb-2">Didn't receive the email?</p>
        <button type="button" class="btn btn-outline-primary btn-sm" id="resendEmailBtn" onclick="resendVerificationEmail()">
          Resend Verification Email
        </button>
        <div id="resendEmailStatus" class="mt-2" style="display: none;"></div>
      </div>
      <div class="mt-3">
        <a href="#" class="text-decoration-none" onclick="toggleForms()">Back to Login</a>
      </div>
    </div>
  </div>

  <!-- Terms & Conditions Modal -->
  <div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="termsModalLabel">Terms & Conditions</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="termsContent">
          <h6>A. Acceptance of Terms</h6>
          <p>By clicking the registration checkbox and accessing the A.Eye service, you agree to be bound by these Terms of Service. If you do not agree to the Terms, you must not use the service.</p>

          <h6>B. Account Security & Data</h6>
          <p><strong>Account Data:</strong> We collect your Username, Email Address, and Password (stored as a secure hash) for account creation and login.</p>
          <p><strong>Progress Data:</strong> We store data related to your Braille learning progress (e.g., stats, mastery levels) solely to provide the core service functionality.</p>
          <p><strong>Responsibility:</strong> You are responsible for maintaining the confidentiality of your account password and for all activities that occur under your account.</p>

          <h6>C. Use of Service</h6>
          <p>The A.Eye platform is provided exclusively for the purpose of personal Braille learning and progress tracking.</p>
          <p><strong>Prohibited Actions:</strong> You agree not to use the service for any unlawful purposes, attempt to gain unauthorized access to our system, or submit false information during registration.</p>

          <h6>D. Intellectual Property</h6>
          <p>All rights, title, and interest in the A.Eye software, design, and content belong exclusively to the A.Eye development team.</p>
          <p>You are granted a limited license to use the service. You may not copy, reverse-engineer, or commercially exploit any part of the service.</p>

          <h6>E. Limitation of Liability</h6>
          <p>The A.Eye service is provided "AS IS" and "AS AVAILABLE" without warranties of any kind.</p>
          <p>A.Eye shall not be liable for any damages (direct, indirect, or consequential) resulting from the use or inability to use the service, including data loss or service interruption.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Privacy Policy Modal -->
  <div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby="privacyModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="privacyModalLabel">Privacy Policy</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="privacyContent">
          <h6>A. Data We Collect (Minimized Data Set)</h6>
          <p>We only collect the minimum amount of data required to operate the A.Eye service:</p>
          <p><strong>Account Identifiers:</strong> Username and Email Address.</p>
          <p><strong>Authentication Data:</strong> Securely hashed Password.</p>
          <p><strong>Usage Data:</strong> Your Braille learning progress, streak data, and attempts recorded by the application.</p>
          <p><strong>Technical Data:</strong> Server logs for monitoring site stability.</p>

          <h6>B. How We Use Your Data (Core Purpose Only)</h6>
          <p>Your data is used strictly for the following purposes:</p>
          <p><strong>Authentication:</strong> To verify your email address (via Brevo) and secure your account access.</p>
          <p><strong>Service Provision:</strong> To track and display your personal Braille learning progress, which is the core function of A.Eye.</p>
          <p><strong>Communication:</strong> To send essential administrative and security notices (e.g., password reset links).</p>

          <h6>C. Data Sharing and Disclosure (Zero Tolerance)</h6>
          <p>We do not sell, rent, trade, or share your personal data (Username, Email, or Progress Data) with any third parties. Your data is confidential and used only by the A.Eye development team for the purposes stated above.</p>

          <h6>D. Data Security</h6>
          <p>We employ industry-standard security measures, including SSL/TLS encryption for data transmission and cryptographic hashing for passwords (handled by Supabase), to protect your information.</p>

          <h6>E. Contact Information</h6>
          <p>If you have questions about this Privacy Policy or wish to request access or deletion of your data, please contact us at <a href="mailto:conde.215980@caloocan.sti.edu.ph">conde.215980@caloocan.sti.edu.ph</a></p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/auth.js?v=2"></script>
  <script src="js/audit-log.js"></script>
</body>
</html>
